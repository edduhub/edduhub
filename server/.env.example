# EduHub Server Configuration
# Copy this file to .env.local and configure for your environment

# ==============================================================================
# APPLICATION CONFIGURATION
# ==============================================================================

# Application port for the HTTP server
APP_PORT=8080

# Enable debug mode (true/false) - enables additional logging and error details
APP_DEBUG=false

# Logging level (debug, info, warn, error)
APP_LOG_LEVEL=info

# ==============================================================================
# DATABASE CONFIGURATION
# ==============================================================================

# PostgreSQL connection settings
DB_HOST=localhost
DB_PORT=5432
DB_USER=keto
DB_PASSWORD=secret
DB_NAME=keto
DB_SSLMODE=disable

# SSL/TLS Configuration for production (uncomment and configure for production)
# DB_SSL_ROOT_CERT=/path/to/root.crt
# DB_SSL_CERT=/path/to/client.crt
# DB_SSL_KEY=/path/to/client.key

# Skip database connection during tests
# DB_SKIP_CONNECT=1

# ==============================================================================
# REDIS CONFIGURATION (OPTIONAL)
# ==============================================================================

# Enable Redis caching and session storage
REDIS_ENABLED=true

# Redis connection settings
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# Redis database number
REDIS_DB=0

# Redis key prefix for all cached values
REDIS_PREFIX=eduhub:

# Connection pool configuration
REDIS_POOL_SIZE=10
REDIS_MIN_IDLE_CONNS=2

# ==============================================================================
# AUTHENTICATION & AUTHORIZATION
# ==============================================================================

# Ory Kratos endpoints (user identity and authentication)
KRATOS_PUBLIC_URL=http://127.0.0.1:4433
KRATOS_ADMIN_URL=http://127.0.0.1:4434
KRATOS_DOMAIN=localhost

# Ory Keto endpoints (authorization and permissions)
KETO_READ_URL=http://127.0.0.1:4467
KETO_WRITE_URL=http://127.0.0.1:4466

# JWT token configuration
# IMPORTANT: Change this to a strong secret in production
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# Application port (also used for AUTH_PORT in Kratos integration)
PORT=8080

# ==============================================================================
# FILE STORAGE CONFIGURATION (MinIO/S3)
# ==============================================================================

# Storage provider endpoint (MinIO for local dev, S3-compatible URLs for cloud)
STORAGE_ENDPOINT=localhost:9000

# Default bucket for storing files
STORAGE_BUCKET=eduhub

# Storage authentication (optional for MinIO, required for cloud S3)
STORAGE_ACCESS_KEY=[your-access-key]
STORAGE_SECRET_KEY=[your-secret-key]

# Use SSL/TLS for storage connections
STORAGE_USE_SSL=false

# Storage region (mainly for S3 compatibility)
STORAGE_REGION=us-east-1

# Presigned URL expiry time in seconds (default: 3600 = 1 hour)
STORAGE_PRESIGNED_URL_EXPIRY=3600

# ==============================================================================
# EMAIL CONFIGURATION (SMTP)
# ==============================================================================

# SMTP server settings for sending emails (notifications, password reset, etc.)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
EMAIL_FROM=noreply@eduhub.local

# Enable STARTTLS encryption for SMTP
SMTP_STARTTLS=true

# ==============================================================================
# OPTIONAL ADVANCED CONFIGURATION
# ==============================================================================

# Request timeout for external services (in seconds)
# REQUEST_TIMEOUT=30

# Maximum file upload size in MB
# MAX_UPLOAD_SIZE_MB=50

# Enable CORS (comma-separated origins)
# CORS_ORIGINS=http://localhost:3000,https://eduhub.example.com

# Session timeout in minutes
# SESSION_TIMEOUT=30

# ==============================================================================
# DEPLOYMENT NOTES
# ==============================================================================

# For local development:
# - Use localhost/127.0.0.1 for all services
# - STORAGE_USE_SSL=false for MinIO
# - JWT_SECRET can be a simple dev key
# - DB_SSLMODE=disable

# For production:
# - Use strong JWT_SECRET (generate with: openssl rand -base64 32)
# - Change all passwords to strong values
# - Set KRATOS_DOMAIN to your actual domain
# - Set STORAGE_USE_SSL=true if using cloud storage
# - DB_SSLMODE=require for production databases
# - Set APP_DEBUG=false
# - Use environment-specific SMTP credentials
